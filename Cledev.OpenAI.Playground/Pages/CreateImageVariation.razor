@page "/create-image-variation"

@inherits CreateImageVariationPage

<PageTitle>Crate Image Variation</PageTitle>

<PageHeader Icon="fa-regular fa-images">Images</PageHeader>

<ul class="nav nav-tabs mb-4">
    <li class="nav-item">
        <a class="nav-link" href="/create-image">Create Image</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/create-image-edit">Create Image Edit</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Create Image Variation</a>
    </li>
</ul>

<p class="mb-4">Creates a variation of a given image.</p>

<EditForm Model="Request" OnValidSubmit="OnSubmitAsync">
    <div class="row">
        <div class="col-md-3 border-end pe-4 d-none d-md-block">
            <CreateImageOptions Request="Request" Sizes="Sizes" Formats="Formats" InColumn="false"></CreateImageOptions>
        </div>
        <div class="col-md-9 col-sm-12 ps-md-4">
            <div class="mb-3">
                <FormLabel InputId="Image" Tooltip="@Tooltips.Image">Select the image</FormLabel>
                <InputFile id="Image" OnChange="OnInputFileForImageChange" class="form-control"></InputFile>
            </div>

            <div class="row">
                <div class="col-auto">
                    <SubmitButton
                        Text="Create Image Variation"
                        LoadingText="Creating Image Variation..."
                        IsProcessing="IsProcessing">
                    </SubmitButton>
                </div>
                <div class="col-auto p-0 d-block d-sm-block d-md-none">
                    <OptionsButton IsProcessing="IsProcessing"></OptionsButton>
                </div>
            </div>
    
            @if (Response is not null && Error is null)
            {
                <h4 class="mt-3">Response</h4>

                @foreach (var image in Images)
                {
                    <img src="@image" alt="Image variation" class="mb-3 border" />
                    <literal>&nbsp;</literal>
                }
            }
        
            <Error Model="Error"></Error>
        </div>
    </div>

    <OptionsModal>
        <CreateImageOptions Request="Request" Sizes="Sizes" Formats="Formats" InColumn="true"></CreateImageOptions>
    </OptionsModal>
</EditForm>
