@page "/create-image-variation"

@inherits CreateImageVariationPage

<PageTitle>Crate Image Variation</PageTitle>

<PageHeader Icon="fa-regular fa-images">Images</PageHeader>

<ul class="nav nav-tabs mb-4">
    <li class="nav-item">
        <a class="nav-link" href="/create-image">Create Image</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/create-image-edit">Create Image Edit</a>
    </li>
    <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Create Image Variation</a>
    </li>
</ul>

<p class="mb-4">Creates a variation of a given image.</p>

<EditForm Model="Request" OnValidSubmit="OnSubmitAsync">
    <div class="mb-3">
        <FormLabel InputId="Image" Tooltip="@Tooltips.Image">Select the image</FormLabel>
        <InputFile id="Image" OnChange="OnInputFileForImageChange" class="form-control"></InputFile>
    </div>

    <CreateImageOptions Request="Request" Sizes="Sizes" Formats="Formats"></CreateImageOptions>

    <SubmitButton
        Text="Create Image Variation"
        LoadingText="Creating Image Variation..."
        IsLoading="IsLoading">
    </SubmitButton>
    
    @*TODO: Move Options to a side panel*@
    @if (IsLoading)
    {
        <button type="button" class="btn btn-outline-secondary" disabled>Options</button>
    }
    else
    {
        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#optionsModal">Options</button>
    }
</EditForm>

@if (Response is not null && Error is null)
{
    <h4 class="mt-3">Response</h4>

    @foreach (var image in Images)
    {
        <img src="@image" alt="Image variation" class="mb-3 border" />
        <literal>&nbsp;</literal>
    }
}

<Error Model="Error"></Error>
